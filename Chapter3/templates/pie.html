<style>
    body {
        font-family: sans-serif;
    }

    .label {
        font-size: 12px;
        fill: white;
        text-anchor: middle;
    }
</style>

<h2>產品訂單比例</h2>
<button id="back_to_main_pie_button" style="display: none" onclick="renderMainPieChart()">back</button>
<div id="pie_chart" width="500" height="500"></div>
<div id="pie_chart_tooltip" style="
    position: absolute;
    visibility: hidden;
    background-color: rgba(0,0,0,0.7);
    color: white;
    padding: 6px 10px;
    border-radius: 5px;
    font-size: 14px;
    pointer-events: none;
    z-index: 100;">
</div>


<script src="{{ url_for('static', filename='js/pie_chart.js') }}"></script>
<script>
    // renderPieChart([
    //     { label: 'A', value: 30 },
    //     { label: 'B', value: 70 },
    //     { label: 'C', value: 45 },
    //     { label: 'D', value: 65 },
    //     { label: 'E', value: 20 },
    // ]);

    // 使用 fetch 載入資料並呼叫 function 繪圖
    function renderMainPieChart() {
        fetch('/api/category_pie')
            .then(response => response.json())
            .then(data => {
                renderPieChart(data);
                document.getElementById('back_to_main_pie_button').style.display = 'none';
            })
            .catch(error => {
                console.error('資料載入失敗:', error);
            });
    }
    renderMainPieChart();

</script>